<style>
/* =========================================
   üé® GLOBAL & RESET
   ========================================= */
:root {
    --court-bg: #C1E1C1;
    --court-line: #ffffff;
    --primary: #2c3e50;
    --btn-bg: #3498db;
    --bg-body: #f0f4f8;
}
* {
    box-sizing: border-box; 
}
body {
    font-family: 'Sarabun', sans-serif;
    background-color: var(--bg-body);
    margin: 0;
    padding: 15px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    gap: 15px;
}
h1, h2, h3, h4 { margin: 0 0 10px 0; color: var(--primary); }

/* --- LAYOUTS --- */
#main-view, #overview-view { display: flex; flex-direction: column; gap: 15px; height: 100%;}
.hidden { display: none !important; }

/* ‚úÖ Grid Layout: ‡∏ü‡∏¥‡∏Å‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà 4 ‡∏Ñ‡∏≠‡∏£‡πå‡∏ó‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠ (‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á!) */
.courts-area-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr); 
    gap: 10px;
    width: 100%;
}

.bottom-data-section {
    display: flex;
    gap: 15px;
    align-items: flex-start;
}

.control-sidebar-container { flex: 0 0 320px; } 
.stats-column { flex: 1; min-width: 0; }
.bottom-history-section { width: 100%; margin-top: 5px; }

/* Panels */
.pastel-panel {
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    border: 1px solid rgba(255,255,255,0.8);
    backdrop-filter: blur(10px);
    background: rgba(255,255,255,0.9);
    display: flex;
    flex-direction: column;
}
.panel-blue { background-color: #e3f2fd; color: #1565c0; }
.panel-green { background-color: #e8f5e9; color: #2e7d32; }
.panel-purple { background-color: #f3e5f5; color: #6a1b9a; }
.panel-yellow { background-color: #fffde7; color: #f9a825; }
.panel-white { background-color: #ffffff; color: #333; }

/* Components */
.control-panel { border-bottom: 1px solid rgba(0,0,0,0.1); padding-bottom: 15px; margin-bottom: 15px; }
.input-group { margin-bottom: 10px; display: flex; align-items: center; gap: 8px; font-size: 0.95em; }
textarea { width: 100%; height: 70px; resize: none; border: 1px solid #ccc; border-radius: 8px; padding: 8px; font-family: inherit;}

button {
    cursor: pointer; padding: 8px 14px; border: none; border-radius: 8px;
    background: var(--btn-bg); color: white; font-weight: bold; font-size: 0.9em;
    transition: all 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
button:hover { opacity: 0.9; transform: translateY(-1px); }
button.danger { background: #e74c3c; }
button.warning { background: #f39c12; }
button.success { background: #27ae60; }
button.secondary { background: #95a5a6; }
button.dark { background: #34495e; }
button.mini-btn { padding: 2px 6px; font-size: 0.75em; margin-left: auto; }

.player-list { list-style: none; padding: 0; margin: 0; }
.player-item {
    background: rgba(255,255,255,0.8); border: 1px solid rgba(0,0,0,0.05); padding: 8px 12px;
    margin-bottom: 6px; border-radius: 8px; display: flex; align-items: center; font-size: 0.95em;
    transition: all 0.3s;
}
.player-item.fastpass { border-left: 5px solid #2ecc71; background: #eafaf1; } 
.player-item.booked { border-left: 5px solid #f1c40f; }

.player-info { display: flex; align-items: center; gap: 8px; flex: 1; min-width: 0; }
.wait-badge { font-size: 0.75em; font-weight: bold; padding: 3px 6px; border-radius: 4px; color: white; margin-left: 5px; flex-shrink: 0;}
.wait-green { background-color: #27ae60; } 
.wait-orange { background-color: #e67e22; } 
.wait-red { background-color: #c0392b; animation: flash 2s infinite; }
@keyframes flash { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

/* Tables */
.stats-table { width: 100%; border-collapse: separate; border-spacing: 0; font-size: 0.9em; }
.stats-table th { background: rgba(0,0,0,0.05); padding: 10px; position: sticky; top: 0; font-weight: bold; z-index: 1;}
.stats-table td { border-bottom: 1px solid rgba(0,0,0,0.05); padding: 8px; text-align: center; background: rgba(255,255,255,0.6); }
.stats-table td:nth-child(2) { text-align: left; font-weight: bold; }
.log-winner { color: #27ae60; font-weight:bold;}
.log-loser { color: #e74c3c; }

/* Court Card */
.court {
    height: 380px; 
    background-color: var(--court-bg);
    border: 3px solid #27ae60; position: relative; border-radius: 12px;
    display: flex; flex-direction: column; box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    overflow: hidden; font-size: 0.85em; 
}
.court-header {
    background: rgba(255,255,255,0.95); padding: 8px 10px; text-align: center;
    font-weight: bold; color: #2c3e50; display: flex; justify-content: space-between;
    border-bottom: 2px solid #27ae60; font-size: 1.1em; white-space: nowrap;
}
.court-lines {
    position: absolute; top: 35px; bottom: 35px; left: 10px; right: 10px;
    border: 2px solid var(--court-line); pointer-events: none;
}
.court-lines::before { content: ''; position: absolute; top: 50%; left: -10px; right: -10px; border-top: 2px dashed rgba(255,255,255,0.8); }
.court-lines::after { content: ''; position: absolute; top: 0; bottom: 0; left: 50%; border-left: 2px solid var(--court-line); }
.service-line-top { position: absolute; top: 35px; left: 10px; right: 10px; height: 15%; border-bottom: 2px solid var(--court-line); }
.service-line-bottom { position: absolute; bottom: 35px; left: 10px; right: 10px; height: 15%; border-top: 2px solid var(--court-line); }

.court-players { flex: 1; display: flex; flex-direction: column; justify-content: space-between; padding: 35px 4px; z-index: 1; }

.court-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    background: rgba(255,255,255,0.85); z-index: 10; backdrop-filter: blur(3px);
    gap: 10px;
}
.btn-overlay {
    padding: 10px 20px; font-size: 1em; border-radius: 25px;
    color: white; border: 2px solid white;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2); cursor: pointer; transition: all 0.2s;
    white-space: nowrap; width: 80%;
}
.btn-overlay:hover { transform: scale(1.05); }
.btn-call { background: #27ae60; }
.btn-rest { background: #e74c3c; }
.btn-open { background: #2c3e50; }

.team { display: flex; justify-content: space-around; padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.5); }
.team-pink .player-on-court { background: #ffcdd2; border-color: #ef5350; color: #b71c1c; }
.team-blue .player-on-court { background: #bbdefb; border-color: #42a5f5; color: #0d47a1; }

.player-on-court {
    background: white; padding: 4px; border-radius: 8px;
    font-size: 0.9em; line-height: 1.1; text-align: center; 
    width: 48%; min-width: 0;
    cursor: pointer; border: 1px solid #ccc; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: transform 0.1s;
    white-space: normal; word-wrap: break-word; overflow-wrap: break-word;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    min-height: 50px;
}
.player-on-court:hover { transform: translateY(-2px); }
.quota-badge { display: block; font-size: 0.7em; background: #333; color: white; border-radius: 4px; margin-top: 2px; padding: 1px 2px; width: 100%; text-overflow: ellipsis; overflow: hidden;}

.court-controls { padding: 8px; background: rgba(255,255,255,0.95); text-align: center; z-index: 2; border-top: 1px solid #eee;}
.timer { font-size: 1.2em; font-weight: 800; margin: 2px 0; color: #333; font-family: monospace;}

/* Modal */
.modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(5px);}
.modal-content { background: white; padding: 25px; border-radius: 16px; width: 320px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
.modal-actions { margin-top: 20px; display: flex; justify-content: flex-end; gap: 8px; }
.reset-section { display: flex; gap: 8px; margin-top: 5px; }
.btn-auto-start { background: linear-gradient(90deg, #27ae60 0%, #2ecc71 100%); animation: pulse 1s infinite; }
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 1; } }

/* Overview Specifics */
.cost-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }
.cost-total { font-size: 1.2em; font-weight: bold; color: #2c3e50; border-top: 2px solid #ccc; margin-top: 10px; padding-top: 10px;}
.nav-bar { display:flex; justify-content: center; margin-top: auto; padding: 10px;}

/* Animation ‡∏õ‡∏∏‡πà‡∏° Live */
.pulse {
    background-color: #e74c3c !important;
    color: white !important;
    animation: pulse-animation 2s infinite;
}
@keyframes pulse-animation {
    0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
    100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
}

/* =========================================
   üì∫ VIEWER MODE
   ========================================= */
body.view-mode button:not(.btn-overlay),
body.view-mode .mini-btn,
body.view-mode input,
body.view-mode select,
body.view-mode #btn-broadcast,
body.view-mode .modal { display: none !important; }

body.view-mode #player-queue,
body.view-mode #courts-container,
body.view-mode #next-match-panel { pointer-events: none; }

body.view-mode { background-color: #f4f6f9; padding: 10px; }
body.view-mode .stats-column,
body.view-mode .bottom-history-section,
body.view-mode .nav-bar,
body.view-mode #btn-broadcast,
body.view-mode .control-panel,
body.view-mode h1,
body.view-mode #queue-count,
body.view-mode #player-queue,
body.view-mode .control-sidebar-container h3, 
body.view-mode .control-sidebar-container h4 { display: none !important; }

body.view-mode .bottom-data-section { display: flex !important; flex-direction: column; width: 100%; }
body.view-mode .control-sidebar-container { display: none !important; }

body.view-mode #next-match-panel { display: block !important; width: 100%; box-sizing: border-box; }
body.view-mode #next-match-list { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
body.view-mode #courts-container { order: 2; margin-top: 10px; }
body.view-mode .courts-area-grid { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important; gap: 15px; }
body.view-mode .court { min-height: 250px; border-radius: 16px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); border: none; }
body.view-mode .court-header { background: #2c3e50; color: white; border-radius: 16px 16px 0 0; border: none; }

/* =========================================
   üì± iPad & Tablet Layout (PRO MAX)
   ========================================= */
@media (max-width: 1400px) {
    /* 1. ‡∏à‡∏±‡∏î Layout ‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏´‡πâ‡πÑ‡∏´‡∏•‡∏•‡∏á (‡πÄ‡∏≠‡∏≤ Dashboard ‡πÑ‡∏õ‡πÑ‡∏ß‡πâ‡∏•‡πà‡∏≤‡∏á) */
    .bottom-data-section {
        flex-direction: column !important;
    }
    
    /* 2. ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (‡∏ü‡πâ‡∏≤): ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ + ‡∏à‡∏±‡∏î‡πÑ‡∏™‡πâ‡πÉ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤) */
    .control-sidebar-container {
        width: 100% !important;
        max-width: 100% !important;
        flex: none !important;
        
        display: flex !important;       
        flex-direction: row !important; 
        gap: 20px;                      
        align-items: flex-start;
    }

    /* ‡πÅ‡∏ö‡πà‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡∏•‡∏∞‡∏Ñ‡∏£‡∏∂‡πà‡∏á (50% - 50%) */
    .sidebar-controls-wrapper, 
    .sidebar-queue-wrapper {
        flex: 1;             
        width: 50%;          
        min-width: 300px; /* ‡∏Å‡∏±‡∏ô‡∏ö‡∏µ‡∏ö‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ */
    }

    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ñ‡∏¥‡∏ß‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡∏ö‡∏ô iPad */
    #player-queue {
        max-height: 250px !important;
    }

    /* 3. ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß): ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
    .stats-column {
        width: 100% !important;
        flex: none !important;
        margin-top: 10px;
    }
    
    /* ‚ùå ‡∏•‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á .courts-area-grid ‡∏ó‡∏¥‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß! 
       (‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ Default ‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 30 ‡∏Ñ‡∏∑‡∏≠ repeat(4, 1fr) ‡πÄ‡∏™‡∏°‡∏≠!) */
}

/* =========================================
   üì± Mobile Layout (‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 600px)
   ========================================= */
@media (max-width: 600px) {
    /* ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠: ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏±‡πâ‡∏á ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏£‡πå‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß */
    .courts-area-grid { grid-template-columns: 1fr; }
    
    .control-sidebar-container {
        flex-direction: column !important;
    }
    .sidebar-controls-wrapper, 
    .sidebar-queue-wrapper {
        width: 100% !important;
    }
}
.court-rule-select {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 2px 5px;
    font-size: 0.8em;
    color: #333;
    font-weight: bold;
    cursor: pointer;
    margin-left: 5px;
}

</style>